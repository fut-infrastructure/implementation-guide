{
  "resourceType": "OperationDefinition",
  "id": "-s-execute-questionnaireresponses",
  "url": "http://ehealth.sundhed.dk/fhir/OperationDefinition/-s-execute-questionnaireresponses",
  "name": "execute-questionnaireresponses",
  "title": "Execute questionnare responses",
  "status": "active",
  "kind": "operation",
  "description": "### Report Contents\nThis report contains a collection of questionnaire responses and related resources\n- Organizations\n- CareTeams\n- PlanDefinitions\n- ActivityDefinitions\n- Questionnaires\n- QuestionnaireResponses\n- Communication\n- ServiceRequestSummary\n### Grouping \nThis report is grouped by Questionnaire. Each group is returned as a FHIR bundle in a separate JSon file.\n### Parameters\n- organization: Filter on EpisodeOfCare.managingOrganization match\n- condition: Filter on CarePlan.addresses.code match\n- period: Filter on QuestionnaireResponse.authored within period\n- plan: Filter on Plan match\n- questionnaire: Filter on ActivityDefinition.composed-of match\n- careteam: Filter on careteam in CarePlan.careteam or EpisodeOfCare.team\n- tag: Filter on tag match\n\n### Output\nOutput can be found in Binary.content. This is a Base64 encoded .zip file containing JSon files corresponding to the report groups.\n### Example output\n### Output\n{\n  'resourceType' : 'Bundle',\n  'id' : 'Questionnaire/44529',\n  'entry' : [ {\n    'fullUrl' : 'https://plan.local.ehealth.sundhed.dk/fhir/PlanDefinition/24206/_history/1',\n    'resource' : {\n      'resourceType' : 'PlanDefinition',\n      'id' : '24206',\n      'meta' : {\n        'versionId' : '1',\n        'profile' : [ 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-plandefinition' ]\n      },\n      'extension' : [ {\n        'url' : 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-modifier-role',\n        'extension' : [ {\n          'url' : 'reference',\n          'valueReference' : {\n            'reference' : 'https://organization.local.ehealth.sundhed.dk/fhir/Organization/14291'\n          }\n        }, {\n          'url' : 'role',\n          'valueCodeableConcept' : {\n            'coding' : [ {\n              'system' : 'http://ehealth.sundhed.dk/cs/modifier-role',\n              'code' : 'owner'\n            } ]\n          }\n        } ]\n      } ],\n      'version' : '1.0',\n      'status' : 'active',\n      'action' : [ {\n        'definitionCanonical' : 'https://plan.local.ehealth.sundhed.dk/fhir/ActivityDefinition/10919'\n      } ]\n    }\n  }, {\n    'fullUrl' : 'https://plan.local.ehealth.sundhed.dk/fhir/ActivityDefinition/10919/_history/1',\n    'resource' : {\n      'resourceType' : 'ActivityDefinition',\n      'id' : '10919',\n      'meta' : {\n        'versionId' : '1',\n        'profile' : [ 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-activitydefinition' ]\n      },\n      'extension' : [ {\n        'url' : 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-sharingPolicy',\n        'valueCodeableConcept' : {\n          'coding' : [ {\n            'system' : 'http://ehealth.sundhed.dk/cs/measurement-sharing-policies',\n            'code' : 'noSharing'\n          } ]\n        }\n      }, {\n        'url' : 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-modifier-role',\n        'extension' : [ {\n          'url' : 'reference',\n          'valueReference' : {\n            'reference' : 'https://organization.local.ehealth.sundhed.dk/fhir/Organization/25403'\n          }\n        }, {\n          'url' : 'role',\n          'valueCodeableConcept' : {\n            'coding' : [ {\n              'system' : 'http://ehealth.sundhed.dk/cs/modifier-role',\n              'code' : 'owner'\n            } ]\n          }\n        } ]\n      } ],\n      'version' : '1.0',\n      'name' : '0ca879ed-678c-4439-aa4a-efc597f92dfb',\n      'status' : 'active',\n      'topic' : [ {\n        'coding' : [ {\n          'system' : 'http://terminology.hl7.org/CodeSystem/definition-topic',\n          'code' : 'treatment'\n        } ]\n      } ],\n      'relatedArtifact' : [ {\n        'type' : 'composed-of',\n        'resource' : 'https://questionnaire.local.ehealth.sundhed.dk/fhir/Questionnaire/44529'\n      } ],\n      'code' : {\n        'coding' : [ {\n          'system' : 'http://ehealth.sundhed.dk/cs/activitydefinition-code',\n          'code' : '273586006'\n        } ]\n      }\n    }\n  }, {\n    'fullUrl' : 'https://questionnaire.local.ehealth.sundhed.dk/fhir/Questionnaire/44529/_history/1',\n    'resource' : {\n      'resourceType' : 'Questionnaire',\n      'id' : '44529',\n      'meta' : {\n        'versionId' : '1',\n        'profile' : [ 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-questionnaire' ]\n      },\n      'extension' : [ {\n        'url' : 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-questionnaire-type',\n        'valueCodeableConcept' : {\n          'coding' : [ {\n            'system' : 'http://ehealth.sundhed.dk/cs/questionnaire-types',\n            'code' : 'QQ'\n          } ]\n        }\n      }, {\n        'url' : 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-modifier-role',\n        'extension' : [ {\n          'url' : 'reference',\n          'valueReference' : {\n            'reference' : 'https://organization.local.ehealth.sundhed.dk/fhir/Organization/24153'\n          }\n        }, {\n          'url' : 'role',\n          'valueCodeableConcept' : {\n            'coding' : [ {\n              'system' : 'http://ehealth.sundhed.dk/cs/modifier-role',\n              'code' : 'owner'\n            } ]\n          }\n        } ]\n      } ],\n      'version' : '1.0',\n      'name' : '090b990e-046a-4374-b7c6-b08613a41cce',\n      'status' : 'active'\n    }\n  }, {\n    'fullUrl' : 'https://organization.local.ehealth.sundhed.dk/fhir/Organization/98618/_history/1',\n    'resource' : {\n      'resourceType' : 'Organization',\n      'id' : '98618',\n      'meta' : {\n        'versionId' : '1',\n        'profile' : [ 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-organization' ]\n      },\n      'extension' : [ {\n        'url' : 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-organization-source',\n        'valueCodeableConcept' : {\n          'coding' : [ {\n            'system' : 'http://ehealth.sundhed.dk/cs/organization-source',\n            'code' : 'manual'\n          } ]\n        }\n      }, {\n        'url' : 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-organization-synchronizationStatus',\n        'valueCodeableConcept' : {\n          'coding' : [ {\n            'system' : 'http://ehealth.sundhed.dk/cs/organization-synchronization-status',\n            'code' : 'NotSynchronized'\n          } ]\n        }\n      } ],\n      'identifier' : [ {\n        'use' : 'official',\n        'system' : 'urn:oid:2.16.840.1.113883.2.24.1.1',\n        'value' : '11111111',\n        'period' : {\n          'start' : '2023-10-10T14:49:12+02:00'\n        }\n      } ],\n      'active' : false,\n      'name' : 'defaultTestFactory-be16f47b-1f8a-4440-a02e-23da1219b0ca',\n      'partOf' : {\n        'reference' : 'https://organization.local.ehealth.sundhed.dk/fhir/Organization/22124'\n      }\n    }\n  }, {\n    'fullUrl' : 'https://organization.local.ehealth.sundhed.dk/fhir/CareTeam/87455/_history/1',\n    'resource' : {\n      'resourceType' : 'CareTeam',\n      'id' : '87455',\n      'meta' : {\n        'versionId' : '1',\n        'profile' : [ 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-careteam' ]\n      },\n      'identifier' : [ {\n        'system' : 'urn:ietf:rfc:3986',\n        'value' : 'urn:uuid:9658ef5f-019a-4c90-9c41-f3ad14a31777'\n      } ],\n      'status' : 'active',\n      'name' : '1b900db5-09dd-4563-b612-2b81201fab16',\n      'reasonCode' : [ {\n        'coding' : [ {\n          'system' : 'urn:oid:1.2.208.176.2.4',\n          'code' : 'DJ44'\n        } ]\n      } ]\n    }\n  }, {\n    'fullUrl' : 'https://measurement.local.ehealth.sundhed.dk/fhir/QuestionnaireResponse/92491/_history/1',\n    'resource' : {\n      'resourceType' : 'QuestionnaireResponse',\n      'id' : '92491',\n      'meta' : {\n        'versionId' : '1',\n        'profile' : [ 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-questionnaireresponse' ]\n      },\n      'extension' : [ {\n        'url' : 'http://hl7.org/fhir/StructureDefinition/workflow-episodeOfCare',\n        'valueReference' : {\n          'reference' : 'https://careplan.local.ehealth.sundhed.dk/fhir/EpisodeOfCare/22208'\n        }\n      }, {\n        'url' : 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-resolved-timing',\n        'extension' : [ {\n          'url' : 'serviceRequestVersionId',\n          'valueId' : 'https://careplan.local.ehealth.sundhed.dk/fhir/ServiceRequest/79439/_history/1'\n        }, {\n          'url' : 'start',\n          'valueDateTime' : '2023-10-10T14:49:12+02:00'\n        }, {\n          'url' : 'end',\n          'valueDateTime' : '2023-10-10T14:49:12+02:00'\n        }, {\n          'url' : 'type',\n          'valueCodeableConcept' : {\n            'coding' : [ {\n              'system' : 'http://ehealth.sundhed.dk/cs/resolved-timing-type',\n              'code' : 'Resolved'\n            } ]\n          }\n        } ]\n      } ],\n      'basedOn' : [ {\n        'reference' : 'https://careplan.local.ehealth.sundhed.dk/fhir/ServiceRequest/79439'\n      } ],\n      'questionnaire' : 'https://questionnaire.local.ehealth.sundhed.dk/fhir/Questionnaire/44529',\n      'status' : 'completed',\n      'subject' : {\n        'reference' : 'https://patient.local.ehealth.sundhed.dk/fhir/Patient/64465'\n      },\n      'authored' : '2023-10-10T14:49:12+02:00',\n      'source' : {\n        'reference' : 'https://patient.local.ehealth.sundhed.dk/fhir/Patient/75218'\n      }\n    }\n  }, {\n    'fullUrl' : 'https://patient.local.ehealth.sundhed.dk/fhir/Communication/97180/_history/1',\n    'resource' : {\n      'resourceType' : 'Communication',\n      'id' : '97180',\n      'meta' : {\n        'versionId' : '1',\n        'profile' : [ 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-communication' ]\n      },\n      'extension' : [ {\n        'url' : 'http://hl7.org/fhir/StructureDefinition/workflow-episodeOfCare',\n        'valueReference' : {\n          'reference' : 'https://careplan.local.ehealth.sundhed.dk/fhir/EpisodeOfCare/14233'\n        }\n      }, {\n        'url' : 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-restriction-category',\n        'valueCodeableConcept' : {\n          'coding' : [ {\n            'system' : 'http://ehealth.sundhed.dk/cs/restriction-category',\n            'code' : 'None'\n          } ]\n        }\n      } ],\n      'basedOn' : [ {\n        'reference' : 'https://careplan.local.ehealth.sundhed.dk/fhir/ServiceRequest/79439'\n      } ],\n      'status' : 'in-progress',\n      'category' : [ {\n        'coding' : [ {\n          'system' : 'http://ehealth.sundhed.dk/cs/communication-category',\n          'code' : 'annotation'\n        } ]\n      }, {\n        'coding' : [ {\n          'system' : 'http://ehealth.sundhed.dk/cs/message-category',\n          'code' : 'advice'\n        } ]\n      } ],\n      'subject' : {\n        'reference' : 'https://patient.local.ehealth.sundhed.dk/fhir/Patient/35194'\n      },\n      'topic' : {\n        'coding' : [ {\n          'system' : 'http://terminology.hl7.org/CodeSystem/communication-topic',\n          'code' : 'report-labs'\n        } ]\n      },\n      'sent' : '2023-10-10T14:49:12+02:00',\n      'reasonCode' : [ {\n        'coding' : [ {\n          'system' : 'http://ehealth.sundhed.dk/cs/message-reasonCode',\n          'code' : 'ReminderSubmitMeasurement'\n        } ]\n      } ]\n    }\n  }, {\n    'fullUrl' : 'urn:uuid:57cfd6a7-dd43-4caa-8220-d50c77aebd8b',\n    'resource' : {\n      'resourceType' : 'Parameters',\n      'parameter' : [ {\n        'name' : 'serviceRequestResponseSummary',\n        'part' : [ {\n          'name' : 'serviceRequest',\n          'valueReference' : {\n            'reference' : 'https://careplan.local.ehealth.sundhed.dk/fhir/ServiceRequest/79439'\n          },\n          'part' : [ {\n            'name' : 'condition',\n            'valueCoding' : {\n              'system' : 'urn:oid:1.2.208.176.2.4',\n              'code' : 'DJ44',\n              'display' : 'Kronisk obstruktiv lungesygdom'\n            }\n          }, {\n            'name' : 'episodeOfCareManagingOrganization',\n            'valueReference' : {\n              'reference' : 'https://organization.local.ehealth.sundhed.dk/fhir/Organization/98618'\n            }\n          }, {\n            'name' : 'episodeOfCarePeriod',\n            'valuePeriod' : {\n              'start' : '1970-01-01T01:00:01+01:00',\n              'end' : '1970-01-01T01:01:40+01:00'\n            }\n          }, {\n            'name' : 'patientIdentifier',\n            'valueIdentifier' : {\n              'system' : 'urn:oid:1.2.208.176.1.2',\n              'value' : '0101010001'\n            }\n          }, {\n            'name' : 'statusHistory',\n            'part' : [ {\n              'name' : 'statusPeriod',\n              'part' : [ {\n                'name' : 'status',\n                'valueCoding' : {\n                  'system' : 'http://hl7.org/fhir/request-status',\n                  'code' : 'draft'\n                }\n              }, {\n                'name' : 'period',\n                'valuePeriod' : {\n                  'start' : '2023-10-02T12:49:12+00:00',\n                  'end' : '2023-10-03T12:49:12+00:00'\n                }\n              } ]\n            }, {\n              'name' : 'statusPeriod',\n              'part' : [ {\n                'name' : 'status',\n                'valueCoding' : {\n                  'system' : 'http://hl7.org/fhir/request-status',\n                  'code' : 'active'\n                }\n              }, {\n                'name' : 'period',\n                'valuePeriod' : {\n                  'start' : '2023-10-03T12:49:12+00:00',\n                  'end' : '2023-10-04T12:49:12+00:00'\n                }\n              } ]\n            }, {\n              'name' : 'statusPeriod',\n              'part' : [ {\n                'name' : 'status',\n                'valueCoding' : {\n                  'system' : 'http://hl7.org/fhir/request-status',\n                  'code' : 'on-hold'\n                }\n              }, {\n                'name' : 'period',\n                'valuePeriod' : {\n                  'start' : '2023-10-04T12:49:12+00:00',\n                  'end' : '2023-10-05T12:49:12+00:00'\n                }\n              } ]\n            }, {\n              'name' : 'statusPeriod',\n              'part' : [ {\n                'name' : 'status',\n                'valueCoding' : {\n                  'system' : 'http://hl7.org/fhir/request-status',\n                  'code' : 'active'\n                }\n              }, {\n                'name' : 'period',\n                'valuePeriod' : {\n                  'start' : '2023-10-05T12:49:12+00:00',\n                  'end' : '2023-10-08T12:49:12+00:00'\n                }\n              } ]\n            }, {\n              'name' : 'statusPeriod',\n              'part' : [ {\n                'name' : 'status',\n                'valueCoding' : {\n                  'system' : 'http://hl7.org/fhir/request-status',\n                  'code' : 'on-hold'\n                }\n              }, {\n                'name' : 'period',\n                'valuePeriod' : {\n                  'start' : '2023-10-08T12:49:12+00:00'\n                }\n              } ]\n            } ]\n          }, {\n            'name' : 'involvedCareTeams',\n            'part' : [ {\n              'name' : 'careTeam',\n              'valueReference' : {\n                'reference' : 'https://organization.local.ehealth.sundhed.dk/fhir/CareTeam/87455'\n              }\n            } ]\n          }, {\n            'name' : 'responses',\n            'part' : [ {\n              'name' : 'response',\n              'part' : [ {\n                'name' : 'occurrence',\n                'part' : [ {\n                  'name' : 'serviceRequestVersionId',\n                  'valueId' : 'https://careplan.local.ehealth.sundhed.dk/fhir/ServiceRequest/79439/_history/1'\n                }, {\n                  'name' : 'start',\n                  'valueDateTime' : '2023-10-10T14:49:12+02:00'\n                }, {\n                  'name' : 'end',\n                  'valueDateTime' : '2023-10-10T14:49:12+02:00'\n                }, {\n                  'name' : 'type',\n                  'valueCodeableConcept' : {\n                    'coding' : [ {\n                      'system' : 'http://ehealth.sundhed.dk/cs/resolved-timing-type',\n                      'code' : 'Resolved'\n                    } ]\n                  }\n                } ]\n              }, {\n                'name' : 'questionnaireResponse',\n                'valueReference' : {\n                  'reference' : 'https://measurement.local.ehealth.sundhed.dk/fhir/QuestionnaireResponse/92491'\n                }\n              }, {\n                'name' : 'submitted',\n                'valueDateTime' : '2023-10-10T12:49:12+00:00'\n              } ]\n            } ]\n          }, {\n            'name' : 'communications',\n            'part' : [ {\n              'name' : 'communication',\n              'valueReference' : {\n                'reference' : 'https://patient.local.ehealth.sundhed.dk/fhir/Communication/97180'\n              }\n            } ]\n          } ]\n        } ]\n      } ]\n    }\n  } ]\n}\n\n",
  "affectsState": true,
  "code": "execute-questionnaireresponses",
  "system": true,
  "type": false,
  "instance": false,
  "parameter": [
    {
      "name": "anonymization",
      "use": "in",
      "min": 1,
      "max": "1",
      "documentation": "This parameter is used to control if the report should be anonymized or not. If the value is set to NONE (no anonymization) and the user lacks the required permission, an exception is thrown.",
      "type": "string"
    },
    {
      "name": "_partition",
      "use": "in",
      "min": 0,
      "max": "1",
      "documentation": "This parameter controls the bin size of query partitions and is made available for internal use during testing to be able to determine the optimal configuration. When the optimal partition size has been determined, the value of partition size will be determined by the deployment configuration.",
      "type": "integer"
    },
    {
      "name": "organization",
      "use": "in",
      "min": 1,
      "max": "1",
      "documentation": "Filter on EpisodeOfCare.managingOrganization match.",
      "type": "Reference"
    },
    {
      "name": "condition",
      "use": "in",
      "min": 0,
      "max": "*",
      "documentation": "Filter on CarePlan.addresses.code match.",
      "type": "Coding"
    },
    {
      "name": "period",
      "use": "in",
      "min": 0,
      "max": "1",
      "documentation": "Filter on QuestionnaireResponse.authored within period.",
      "type": "Period"
    },
    {
      "name": "plan",
      "use": "in",
      "min": 0,
      "max": "*",
      "documentation": "Filter on Plan match.",
      "type": "Reference"
    },
    {
      "name": "questionnaire",
      "use": "in",
      "min": 0,
      "max": "*",
      "documentation": "Filter on ActivityDefinition.composed-of match.",
      "type": "Reference"
    },
    {
      "name": "careteam",
      "use": "in",
      "min": 0,
      "max": "*",
      "documentation": "Filter on careteam in CarePlan.careteam or EpisodeOfCare.team.",
      "type": "Reference"
    },
    {
      "name": "tag",
      "use": "in",
      "min": 0,
      "max": "*",
      "documentation": "Filter on tag match.",
      "type": "Coding"
    },
    {
      "name": "return",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "Binary"
    }
  ]
}
