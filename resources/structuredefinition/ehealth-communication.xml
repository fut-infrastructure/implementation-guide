<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="ehealth-communication" />
  <url value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-communication" />
  <name value="ehealth-communication" />
  <title value="eHealth Communication" />
  <status value="draft" />
  <fhirVersion value="3.0.1" />
  <kind value="resource" />
  <abstract value="false" />
  <type value="Communication" />
  <baseDefinition value="http://hl7.org/fhir/StructureDefinition/Communication" />
  <derivation value="constraint" />
  <differential>
    <element id="Communication.definition">
      <path value="Communication.definition" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-plandefinition" />
      </type>
      <type>
        <code value="Reference" />
        <targetProfile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-activitydefinition" />
      </type>
    </element>
    <element id="Communication.category">
      <path value="Communication.category" />
      <min value="1" />
    </element>
    <element id="Communication.subject">
      <path value="Communication.subject" />
      <definition value="Patient for which data is the topic of this communication." />
      <min value="1" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-patient" />
      </type>
    </element>
    <element id="Communication.recipient">
      <path value="Communication.recipient" />
      <definition value="Restrictions on who are allowed to read this particular message within the set of actors involved in the episode (identified in context). Setting no reference means no restrictions, while only referencing same entity as identified in sender corresponds to a private message." />
      <type>
        <code value="Reference" />
        <targetProfile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-device" />
      </type>
      <type>
        <code value="Reference" />
        <targetProfile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-organization" />
      </type>
      <type>
        <code value="Reference" />
        <targetProfile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-patient" />
      </type>
      <type>
        <code value="Reference" />
        <targetProfile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-practitioner" />
      </type>
      <type>
        <code value="Reference" />
        <targetProfile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-relatedperson" />
      </type>
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Group" />
      </type>
      <type>
        <code value="Reference" />
        <targetProfile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-careteam" />
      </type>
    </element>
    <element id="Communication.topic">
      <path value="Communication.topic" />
      <min value="1" />
    </element>
    <element id="Communication.context">
      <path value="Communication.context" />
      <definition value="Episode in which context the message occurs." />
      <comment value="References SHALL be a reference to an actual FHIR resource, and SHALL be resolveable (allowing for access control, temporary unavailability, etc). Resolution can be either by retrieval from the URL, or, where applicable by resource type, by treating an absolute reference as a canonical URL and looking it up in a local registry/repository.&#xD;&#xA;&#xD;&#xA;Episode in which context the message occurs." />
      <min value="1" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-episodeofcare" />
      </type>
    </element>
    <element id="Communication.sender">
      <path value="Communication.sender" />
      <definition value="Who created the message." />
      <comment value="References SHALL be a reference to an actual FHIR resource, and SHALL be resolveable (allowing for access control, temporary unavailability, etc). Resolution can be either by retrieval from the URL, or, where applicable by resource type, by treating an absolute reference as a canonical URL and looking it up in a local registry/repository.&#xD;&#xA;&#xD;&#xA;Who created the message." />
      <min value="1" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-device" />
      </type>
      <type>
        <code value="Reference" />
        <targetProfile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-organization" />
      </type>
      <type>
        <code value="Reference" />
        <targetProfile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-patient" />
      </type>
      <type>
        <code value="Reference" />
        <targetProfile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-practitioner" />
      </type>
      <type>
        <code value="Reference" />
        <targetProfile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-relatedperson" />
      </type>
    </element>
    <element id="Communication.reasonReference">
      <path value="Communication.reasonReference" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Condition" />
      </type>
      <type>
        <code value="Reference" />
        <targetProfile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-observation" />
      </type>
    </element>
    <element id="Communication.payload.content[x]:contentString">
      <path value="Communication.payload.contentString" />
      <sliceName value="contentString" />
      <type>
        <code value="string" />
      </type>
    </element>
  </differential>
</StructureDefinition>